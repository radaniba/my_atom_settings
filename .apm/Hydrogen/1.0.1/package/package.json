{"name":"Hydrogen","main":"./lib/main","version":"1.0.1","description":"Run code and get results inline using Jupyter kernels like IPython, IJulia, and iTorch","author":{"name":"Will Whitney","email":"me@willwhitney.com"},"keywords":["execute","run","jupyter","ipython","julia","python","torch","ijulia","itorch","plot","image"],"activationCommands":{"atom-text-editor":["hydrogen:select-kernel","hydrogen:connect-to-remote-kernel","hydrogen:run","hydrogen:run-and-move-down","hydrogen:run-all","hydrogen:run-all-above","hydrogen:run-cell","hydrogen:run-cell-and-move-down"]},"scripts":{"postinstall":"npm rebuild zeromq --build-from-source","build:docs":"markdox lib/plugin-api/hydrogen-provider.coffee lib/plugin-api/hydrogen-kernel.coffee -o PLUGIN_API.md"},"repository":{"type":"git","url":"git+https://github.com/nteract/hydrogen.git"},"license":"MIT","engines":{"atom":">=1.6.0 <2.0.0"},"dependencies":{"atom-message-panel":"^1.2.4","atom-space-pen-views":"^2.0.5","escape-string-regexp":"^1.0.5","jmp":"^0.7.2","jupyter-js-services":"^0.18.1","lodash":"^4.14.0","requirejs":"^2.2.0","spawnteract":"^2.1.1","tildify":"^1.2.0","transformime":"^3.2.0","transformime-marked":"0.0.1","uuid":"^2.0.1","ws":"^1.1.1","xmlhttprequest":"^1.8.0"},"consumedServices":{"status-bar":{"versions":{"^1.0.0":"consumeStatusBar"}}},"providedServices":{"autocomplete.provider":{"versions":{"2.0.0":"provide"}},"hydrogen.provider":{"versions":{"1.0.0":"provideHydrogen"}}},"devDependencies":{"coffeelint":"^1.15.7","coffeescope2":"^0.4.2","markdox":"^0.1.10"},"readme":"# Hydrogen\n\n[![slack in](http://slack.nteract.in/badge.svg)](http://slack.nteract.in)\n[![Build Status](https://travis-ci.org/nteract/hydrogen.svg?branch=master)](https://travis-ci.org/nteract/hydrogen)\n\nThis package lets you run your code directly in Atom using any [Jupyter](https://jupyter.org/) kernels you have installed.\n\nHydrogen was inspired by Bret Victor's ideas about the power of instantaneous feedback and the design of [Light Table](http://lighttable.com/). Running code inline and in real time is a more natural way to develop. By bringing the interactive style of Light Table to the rock-solid usability of Atom, Hydrogen makes it easy to write code the way you want to.\n\n![hero](https://cloud.githubusercontent.com/assets/13285808/20360886/7e03e524-ac03-11e6-9176-37677f226619.gif)\n\n## Features\n\n- execute a line, selection, or block at a time\n- rich media support for plots, images, and video\n- watch expressions let you keep track of variables and re-run snippets after every change\n- completions from the running kernel, just like autocomplete in the Chrome dev tools\n- code can be inspected to show useful information provided by the running kernel\n- one kernel per language (so you can run snippets from several files, all in the same namespace)\n- interrupt or restart the kernel if anything goes wrong\n- use a custom kernel connection (for example to run code inside Docker), read more in the \"Custom kernel connection (inside Docker)\" section\n\n## Dependencies\n\nFor all systems, you'll need\n\n- [Atom](https://atom.io/) `1.6.0+`\n- [Jupyter notebook](http://jupyter.org): If you have Python and pip setup, install the notebook directly with `pip install jupyter`\n- Python 2 for builds (you can still run Python 3 code)\n\nYou likely have them installed already installed. You can check your installation with `apm install --check`.\n\n#### Linux\n\n- `python` (`v2.7` recommended, `v3.x.x` is not supported)\n- `make`\n- A proper C/C++ compiler toolchain, like [GCC](https://gcc.gnu.org/)\n\nUse your distribution's package manager to install.\n\n#### macOS\n\n- `python` (`v2.7` recommended, `v3.x.x` is not supported): already installed on Mac OS X\n- `Xcode Command Line Tools`: Can be installed with `xcode-select --install`\n\n#### Windows\n> :bulb: [Windows Vista / 7 only] requires [.NET Framework 4.5.1](http://www.microsoft.com/en-us/download/details.aspx?id=40773)\n\n- **Option 1:** Install all the required tools with a bundeled installer\n  1. Install the Visual C++ Build Environment from an elevated PowerShell (run as Administrator):\n    * **Option 1:** Install [Windows Build Tools for Atom](https://github.com/lgeiger/windows-build-tools) by running:\n    ```powershell\n    apm install windows-build-tools --verbose\n    ```\n    * **Option 2:** Install Microsoft's [Windows Build Tools](https://github.com/felixrieseberg/windows-build-tools) by running:\n    ```powershell\n    npm install -g windows-build-tools\n    ```\n\n  2. To complete the setup run:\n  ```powershell\n  apm config set msvs_version 2015\n  apm config set python $env:USERPROFILE\\.windows-build-tools\\python27\\python.exe\n  ```\n- **Option 2:** Install dependencies and configuration manually\n   1. Visual C++ Build Environment:\n     * **Option 1:** Install [Visual C++ Build Tools](http://go.microsoft.com/fwlink/?LinkId=691126) using the *Default Install* option.\n     * **Option 2:** Install [Visual Studio 2015](https://www.visualstudio.com/products/visual-studio-community-vs) (or modify an existing installation) and select *Common Tools for Visual C++* during setup.  \n\n  2. Install [Python 2.7](https://www.python.org/downloads/) or [Miniconda 2.7](http://conda.pydata.org/miniconda.html) (`v3.x.x` is not supported)\n\n  3. To complete the setup run:\n  ```powershell\n  apm config set msvs_version 2015\n  apm config set python python2.7\n  ```\n\n## Installation\n\nAssuming you followed the dependencies steps above, you can now `apm install hydrogen` (recommended) or search for \"hydrogen\" in the Install pane of the Atom settings.\n\nIf your default `python` is 3.x, you need to run instead `PYTHON=python2.7 apm install hydrogen` or change the default version for `apm` with `apm config set python $(which python2.7)` beforehand. You can still use 3.x versions of Python in Hydrogen, but it will only build with 2.x due to a [longstanding issue with `gyp`](https://bugs.chromium.org/p/gyp/issues/detail?id=36).\n\n\n### Kernels\n\nTested and works with:\n\n- [IPython](http://ipython.org/)\n- [IJulia](https://github.com/JuliaLang/IJulia.jl)\n- [iTorch](https://github.com/facebook/iTorch)\n- [IJavascript](https://github.com/n-riesco/ijavascript)\n- [jupyter-nodejs](https://github.com/notablemind/jupyter-nodejs)\n- [IRkernel](https://github.com/IRkernel/IRkernel) `0.4+`\n- [IElixir](https://github.com/pprzetacznik/IElixir)\n- [jupyter-scala](https://github.com/alexarchambault/jupyter-scala)\n\nBut it _should_ work with any [kernel](https://github.com/ipython/ipython/wiki/IPython-kernels-for-other-languages). If you are using hydrogen with another kernel please add it to this list or [post an issue](https://github.com/nteract/hydrogen/issues) if anything is broken!\n\n<img src=\"https://cloud.githubusercontent.com/assets/13285808/16931386/048f056e-4d41-11e6-8563-3baa8ed84371.png\">\n\nNote that if you install a new kernel, you'll need to run **Hydrogen: Update Kernels** for Hydrogen to find it. For performance reasons, Hydrogen only looks for available kernels when it first starts.\n\n#### Debian 8 and Ubuntu 16.04 LTS\n\nUnfortunately, the versions of IPython provided in Debian's and Ubuntu's\nrepositories are rather old and Hydrogen is unable to detect the kernel specs\ninstalled in your machine. To workaround this issue, Hydrogen provides the\nsetting `KernelSpec`, where the user can declare the kernel specs manually.\nFind the `KernelSpec` setting in the Atom GUI by going to the Settings pane,\nclick Packages, search for Hydrogen, and click the Hydrogen Settings button.\n\nBelow is an example `KernelSpec` for IPython 2 and 3:\n\n```json\n{\n  \"kernelspecs\": {\n    \"python2\": {\n      \"spec\": {\n        \"display_name\": \"Python 2\",\n        \"language\": \"python\",\n        \"argv\": [\"python2.7\", \"-m\", \"ipykernel\", \"-f\", \"{connection_file}\"],\n        \"env\": {}\n      }\n    },\n    \"python3\": {\n      \"spec\": {\n        \"display_name\": \"Python 3\",\n        \"language\": \"python\",\n        \"argv\": [\"python3.4\", \"-m\", \"ipykernel\", \"-f\", \"{connection_file}\"],\n        \"env\": {}\n      }\n    }\n  }\n}\n```\n\n## Troubleshooting\n\nWe have a [troubleshooting guide](TROUBLESHOOTING.md)! It's pretty sparse at the\nmoment, so please share with us the resolution to any rough spots that you find.\n\n\n## Usage\n\nHydrogen provides a selection of commands for running code. Press ⌘-⇧-P to open the command palette and type \"hydrogen\" and they will come up.\n\n### \"Hydrogen: Run\"\nThere are two ways to tell Hydrogen which code in your file to run.\n\n1. **Selected code:** If you have code selected when you hit Run, Hydrogen will run exactly that code.\n2. **Current block:** With no code selected, Hydrogen will try to find the complete block that's on or before the current line.\n\n    - If the line you're on is already a complete expression (like `s = \"abracadabra\"`), Hydrogen will run just that line.\n\n    - If the line you're on is the start of a block like a `for` loop, Hydrogen will run the whole block.\n\n    - If the line you're on is blank, Hydrogen will run the first block above that line.\n\nIt's easiest to see these interactions visually:\n\n![execute](https://cloud.githubusercontent.com/assets/13285808/20360915/a16efcba-ac03-11e6-9d5c-3489b3c3c85f.gif)\n\n**\"Hydrogen: Run And Move Down\"** will run the the code as described above and move the cursor to the next executable line.\n\nIf your code starts getting cluttered up with results, run **\"Hydrogen: Clear Results\"** to remove them all at once.\n\n### \"Hydrogen: Run Cell\"\nA \"code cell\" is a block of lines to be executed at once. You can define them using inline comments. Hydrogen supports a\nmultitude of ways to define cells. Pick the one you like best.\nThe following is an example for `python` but it will work in any language, just replace `#` with the comment symbol for your desired language:\n\n<img width=280 src=\"https://cloud.githubusercontent.com/assets/13285808/17094174/e8ec17b8-524d-11e6-9140-60b43e073619.png\">\n\nWhen you place the cursor inside a cell and hit **\"Run Cell\"**, Hydrogen will execute this cell. The command **\"Hydrogen: Run Cell And Move Down\"** will move the cursor to the next cell after execution.\n\n### \"Hydrogen: Run All\" and \"Hydrogen: Run All Above\"\nThese commands will run all code inside the editor or all code above the cursor.\n\n\n### Watch Expressions\n\nAfter you've run some code with Hydrogen, you can use the **\"Hydrogen: Toggle Watches\"** command from the Command Palette to open the watch expression sidebar. Whatever code you write in watch expressions will be re-run after each time you send that kernel any other code.\n\n![watch](https://cloud.githubusercontent.com/assets/13285808/20361086/4434ab3e-ac04-11e6-8298-1fb925de4e78.gif)\n\n**IMPORTANT:** Be careful what you put in your watch expressions. If you write code that mutates state in a watch expression, that code will get run after every execute command and likely result in some _extremely confusing_ bugs.\n\n\nYou can re-run the watch expressions by using the normal run shortcut (⌘-↩ by default) inside a watch expression's edit field.\n\nIf you have multiple kernels running, you can switch between their watch expressions with the **\"Hydrogen: Select Watch Kernel\"** command (or just click on the \"Kernel: <language>\" text).\n\n### Completion\n\nReceive completions from the running kernel.\n\n<img width=\"416\" src=\"https://cloud.githubusercontent.com/assets/13285808/14108987/35d17fae-f5c0-11e5-9c0b-ee899387f4d9.png\">\n\n### Code Introspection\n\nYou can use the **\"Hydrogen: Toggle Inspector\"** command from the Command Palette to get metadata from the kernel about the object under the cursor.\n\n<img width=\"770\" src=\"https://cloud.githubusercontent.com/assets/13285808/14108719/d72762bc-f5be-11e5-8188-32725e3d2726.png\">\n\n### Managing kernels\n\nSometimes things go wrong. Maybe you've written an infinite loop, maybe the kernel has crashed, or maybe you just want to clear the kernel's namespace. Use the command palette to **interrupt** (think `Ctrl-C` in a REPL) or **restart** the kernel.\n\nYou can also access these commands by clicking on the kernel status in the status bar or via the command palette. It looks like this:\n\n<img src=\"https://cloud.githubusercontent.com/assets/13285808/16894732/e4e5b4de-4b5f-11e6-8b8e-facf17a7c6c4.png\" width=300>\n\nAdditionally, if you have two or more kernels for a particular language (grammar), you can select which kernel to use with the \"Switch to <kernel>\" option in the Kernel Commands menu.\n\n## Plugins for Hydrogen\n\nHydrogen has support for plugins. Feel free to add your own to the list:\n- [Hydrogen Launcher](https://github.com/lgeiger/hydrogen-launcher)\n\nIf you are interested in building a plugin take a look at our [plugin API documentation](PLUGIN_API.md).\n\n## How it works\n\nHydrogen implements the [messaging protocol](http://jupyter-client.readthedocs.io/en/latest/messaging.html) for [Jupyter](https://jupyter.org/). Jupyter (formerly IPython) uses ZeroMQ to connect a client (like Hydrogen) to a running kernel (like IJulia or iTorch). The client sends code to be executed to the kernel, which runs it and sends back results.\n\n## Remote kernels via kernel gateways\n\nIn addition to managing local kernels and connecting to them over ZeroMQ, Hydrogen is also able to connect to Jupyter Kernel Gateways and Jupyter Notebook servers. This is most useful for running code remotely (e.g. in the cloud).\n\nTo connect to a gateway server, you must first add the connection information to the Hydrogen `gateways` setting. An example settings entry might be:\n\n```json\n[{\n    \"name\": \"Remote notebook\",\n    \"options\": {\n            \"baseUrl\": \"http://example.com:8888\"\n    }\n}]\n```\n\nEach entry in the gateways list needs at minimum a `name` (for displaying in the UI), and a value for `options.baseUrl`. The `options` are passed directly to the `jupyter-js-services` npm package, which includes documentation for additional fields.\n\nAfter gateways have been configured, you can use the **\"Hydrogen: Connect to Remote Kernel\"** command. You will be prompted to select a gateway, and then given the choice to either create a new session or connect to an existing one.\n\nUnlike with local kernels, Hydrogen does not kill remote kernels when it disconnects from them. This allows sharing remote kernels between Hydrogen and the Notebook UI, as well as using them for long-running processes. To clean up unused kernels, you must explicitly call the **\"Hydrogen: Shutdown Kernel\"** command while connected to a kernel.\n\n**Note:** Unlike a notebook server, the jupyter kernel gateway by default disables listing already-running kernels. This means that once disconnected from a kernel, you will not be able to reconnect to it. You can set `c.KernelGatewayApp.list_kernels = True` in your kernel gateway configuration to change this behavior.\n\n## Custom kernel connection (inside Docker)\n\nYou can use a custom kernel connection file to connect to a previously created kernel.\n\nFor example, you can run a kernel inside a Docker container and make Hydrogen connect to it automatically. If you are using Docker this would allow you to develop from Atom but with all the dependencies, autocompletion, environment, etc of a Docker container.\n\nHydrogen will look for a kernel JSON connection file under `./hydrogen/connection.json` inside your project. If that file exists, Hydrogen will try to connect to the kernel specified by that connection file.\n\nHere's a simple recipe for doing and testing that with Python:\n\n* In your project directory, create a `Dockerfile` with:\n\n```\nFROM python:2.7\n\nRUN pip install markdown # Delete this line after testing\n\nRUN pip install ipykernel\nRUN echo \"alias hydrokernel='python -m ipykernel \"'--ip=$(hostname -I)'\" -f /tmp/hydrogen/connection.json'\" >> /etc/bash.bashrc\n```\n\nYou will test using the Python package `markdown` from inside the Docker container in your local Atom editor, with autocompletion, etc.\n\nThe last two lines are the only (temporary) addition to your `Dockerfile` that will allow you to develop locally using the remote Python kernel. If you already have a Python project with a `Dockerfile` you only need to copy those 2 lines and add them to it:\n\n```\nRUN pip install ipykernel\nRUN echo \"alias hydrokernel='python -m ipykernel \"'--ip=$(hostname -I)'\" -f /tmp/hydrogen/connection.json'\" >> /etc/bash.bashrc\n```\n\nThe first of those two lines will install the Python package `ipykernel`, which is the only requisite to run the remote Python kernel.\n\nThe second line creates a handy shortcut named `hydrokernel` to run a Python kernel that listens on the container's IP address and writes the connection file to `/tmp/hydrogen/connection.json`.\n\n* Run your container mounting a volume that maps `./hydrogen/` in your local project directory to `/tmp/hydrogen/` in your container. That's the trick that will allow Hydrogen to connect to the kernel running inside your container automatically. It's probably better to run it with the command `bash` and start the kernel manually, so that you can restart it if you need to (or if it dies).\n\n### Running using docker build\n\n* Build your container with:\n\n```\ndocker build -t python-docker .\n```\n\n```\ndocker run -it --name python-docker -v $(pwd)/hydrogen:/tmp/hydrogen python-docker bash\n```\n\n* Next, you just have to call the alias command we created in the `Dockerfile`, that will start the kernel with all the parameters needed:\n\n```\nhydrokernel\n```\nPlease see below for information to do after your container has started running.\n\n### Running using docker-compose\n\nIf you try to use `docker-compose` with the Dockerfile as above you might not be able to connect to hydrokernel. This is because the ports have been not forwarded and cannot be accessed from outside of the new docker-compose sub-network. You need to forward these ports manually in the `docker-compose.yml` file.\n\nTo ensure the ports used by hydrokernel are the same each time it loads you must specify them on the command line. Do not try and use/modify connection.json as it is overwritten on startup.\n```\npython -m ipykernel --stdin=45323 --iopub=43223 --shell=41454 --control=44186 --hb=40772 --ip=0.0.0.0 -f /tmp/hydrogen/connection.json\n```\nYou may notice that the IP address given is different, `0.0.0.0` binds to all possible interfaces.\n\nCreate `docker-compose.yml` and paste the following:\n```\nversion: '2'\nservices:\n  hydrokernel:\n    build: .\n    ports: #FROM connection.json\n      - \"45323:45323\"\n      - \"44186:44186\"\n      - \"40772:40772\"\n      - \"41454:41454\"\n      - \"43223:43223\"\n    volumes:\n      - ./hydrogen:/tmp/hydrogen #hydrogen connection info\n    command: python -m ipykernel --stdin=45323 --iopub=43223 --shell=41454 --control=44186 --hb=40772 --ip=0.0.0.0 -f /tmp/hydrogen/connection.json\n```\nKey points:\n* Ensure `docker-compose.yml` is in the same directory as your `Dockerfile`. If you have put your Dockerfile in a subfolder then modify the `build` entry for the hydrokernel service in the `docker-compose.yml` file to point to the Dockerfile.\n\n* Ensure that the ports that are forwarded are exactly the same on the host machine as the container i.e. port 45323 should be forwarded to 45253. Reason being, Hydrogen will attempt to connect using the ports in the connection.json file which will be described as the container sees them, not the host.\n\n* You could also run the command in the Dockerfile as a `CMD` entry but this way it's crystal clear what ports we're forwarding, there are quite a few so switching between files to get them is a headache!\n\nYou can then use `docker-compose up` in the same directory as docker-compose.yml to start it up.\n\nPlease see below for information to do after your container has started running.\n\n### When your container is running\n* You will see an output similar to:\n\n```\nroot@24ae5d04ef3c:/# hydrokernel\nNOTE: When using the `ipython kernel` entry point, Ctrl-C will not work.\n\nTo exit, you will have to explicitly quit this process, by either sending\n\"quit\" from a client, or using Ctrl-\\ in UNIX-like environments.\n\nTo read more about this, see https://github.com/ipython/ipython/issues/2049\n\n\nTo connect another client to this kernel, use:\n    --existing /tmp/hydrogen/connection.json\n```\n\n* And you will see that a file was created in `./hydrogen/connection.json` inside your project directory.\n\n* Now you can create a file `test.py` with:\n\n```\nimport markdown\nmarkdown.version\n```\n\n* Select the contents and run them with Hydrogen (\"`cmd-shift-P`\" and \"`Hydrogen: run`\").\n\n* You will see the inline execution and output that just ran from your kernel, even if you don't have the Python package `mardown` installed locally, because it's running inside your container.\n\n```\nimport markdown [✓]\nmarkdown.version ['2.6.6']\n```\n\n\n\n## Why \"Hydrogen\"?\n\nHydrogen atoms make up 90% of Jupiter by volume.\n\nPlus, it was easy to make a logo.\n\n![hydrogen logo](https://cdn.rawgit.com/nteract/hydrogen/master/static/logo.svg)\n\n## Development\n#### Quick and dirty setup\n\n`apm develop hydrogen`\n\nThis will clone the `hydrogen` repository to `~/github` unless you set the\n`ATOM_REPOS_HOME` environment variable.\n\n#### I already cloned it!\n\nIf you cloned it somewhere else, you'll want to use `apm link --dev` within the\npackage directory, followed by `apm install` to get dependencies.\n\n### Workflow\n\nAfter pulling upstream changes, make sure to run `apm update`.\n\nTo start hacking, make sure to run `atom --dev` from the package directory.\nCut a branch while you're working then either submit a Pull Request when done\nor when you want some feedback!\n\n#### Running specs\n\nYou can run specs by triggering the `window:run-package-specs` command in Atom. To run tests on the command line use `apm test` within the package directory.\n\nYou can learn more about how to write specs [here](http://flight-manual.atom.io/hacking-atom/sections/writing-specs/).\n","readmeFilename":"README.md","bugs":{"url":"https://github.com/nteract/hydrogen/issues"},"homepage":"https://github.com/nteract/hydrogen#readme","_id":"Hydrogen@1.0.1","_shasum":"16fc32eae7162a5c5c63fc2a5038225d4ace3f8d","_resolved":"file:../d-1161030-41052-wnu02u/package.tgz","_from":"../d-1161030-41052-wnu02u/package.tgz"}